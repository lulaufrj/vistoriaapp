<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sistema profissional para vistorias imobili√°rias">
  <title>VistoriaApp - Sistema de Vistoria Imobili√°ria</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- Auth Container -->
  <div id="authContainer" class="hidden">
    <div class="auth-wrapper">
      <div class="auth-card">
        <div class="auth-header">
          <div class="logo justify-center">
            <span>üè¢ VistoriaApp</span>
          </div>
          <p class="text-center text-gray-500 mt-2">Sistema Profissional de Laudos</p>
        </div>

        <!-- Login Section -->
        <div id="loginSection">
          <h2 class="text-center mb-6">Login</h2>
          <form id="loginForm">
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" id="loginEmail" required placeholder="seu@email.com">
            </div>
            <div class="form-group">
              <label class="form-label">Senha</label>
              <input type="password" class="form-input" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
              <div class="text-right mt-1">
                <a href="#" id="toForgotBtn" class="text-sm text-primary-600 hover:text-primary-700">Esqueci minha
                  senha</a>
              </div>
            </div>
            <button type="submit" class="btn btn-primary w-full" id="loginBtn">Entrar</button>
          </form>
          <div class="auth-footer text-center mt-4">
            <p>N√£o tem conta? <a href="#" id="toRegisterBtn" class="text-primary-600 font-bold">Cadastre-se</a></p>
          </div>
        </div>

        <!-- Register Section -->
        <div id="registerSection" class="hidden">
          <h2 class="text-center mb-6">Criar Conta</h2>
          <form id="registerForm">
            <div class="form-group">
              <label class="form-label">Nome Completo</label>
              <input type="text" class="form-input" id="registerName" required placeholder="Seu Nome">
            </div>
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" id="registerEmail" required placeholder="seu@email.com">
            </div>
            <div class="form-group">
              <label class="form-label">Senha</label>
              <input type="password" class="form-input" id="registerPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button type="submit" class="btn btn-primary w-full" id="registerBtn">Criar Conta</button>
          </form>
          <div class="auth-footer text-center mt-4">
            <p>J√° tem conta? <a href="#" id="toLoginFromRegisterBtn" class="text-primary-600 font-bold">Fa√ßa Login</a>
            </p>
          </div>
        </div>

        <!-- Forgot Password Section -->
        <div id="forgotPasswordSection" class="hidden">
          <h2 class="text-center mb-6">Recuperar Senha</h2>
          <p class="text-center text-gray-500 mb-4 text-sm">Digite seu email para receber um c√≥digo de recupera√ß√£o.</p>
          <form id="forgotPasswordForm">
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" id="forgotEmail" required placeholder="seu@email.com">
            </div>
            <button type="submit" class="btn btn-primary w-full" id="forgotBtn">Enviar C√≥digo</button>
          </form>
          <div class="auth-footer text-center mt-4">
            <p><a href="#" id="backToLoginFromForgotBtn" class="text-primary-600 font-bold">Voltar para Login</a></p>
          </div>
        </div>

        <!-- Reset Password Section -->
        <div id="resetPasswordSection" class="hidden">
          <h2 class="text-center mb-6">Criar Nova Senha</h2>
          <div class="bg-blue-50 text-blue-700 p-3 rounded mb-4 text-sm">
            üìß Verifique o Console do Servidor para pegar o c√≥digo!
          </div>
          <form id="resetPasswordForm">
            <div class="form-group">
              <label class="form-label">C√≥digo de Recupera√ß√£o</label>
              <input type="text" class="form-input" id="resetToken" required placeholder="Cole o c√≥digo aqui">
            </div>
            <div class="form-group">
              <label class="form-label">Nova Senha</label>
              <input type="password" class="form-input" id="newPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button type="submit" class="btn btn-primary w-full" id="resetBtn">Salvar Nova Senha</button>
          </form>
          <div class="auth-footer text-center mt-4">
            <p><a href="#" id="backToLoginFromResetBtn" class="text-primary-600 font-bold">Voltar para Login</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- App Container (Protected) -->
  <div id="appContainer" class="hidden">
    <div class="app-layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <svg class="logo-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 80V40L50 20L80 40V80H60V60H40V80H20Z" fill="#2563eb" />
              <path d="M35 45L50 35L65 45V55L50 65L35 55V45Z" fill="#60a5fa" />
              <circle cx="50" cy="50" r="8" fill="white" />
              <path d="M48 48L52 52M52 48L48 52" stroke="#2563eb" stroke-width="2" stroke-linecap="round" />
            </svg>
            <span>VistoriaApp</span>
          </div>
        </div>

        <nav class="sidebar-nav">
          <button class="nav-item" id="historyBtn">
            <span class="nav-icon">üìã</span>
            <span>Hist√≥rico</span>
          </button>

          <div class="nav-spacer"></div>

          <button onclick="Auth.logout()" class="nav-item nav-item-danger">
            <span class="nav-icon">üö™</span>
            <span>Sair</span>
          </button>
        </nav>
      </aside>

      <!-- Main Content Area -->
      <div class="main-wrapper">
        <!-- Wizard Navigation -->
        <nav class="wizard-nav">
          <div class="wizard-steps">
            <div class="wizard-step active" data-step="1">
              <div class="wizard-step-circle">1</div>
              <div class="wizard-step-label">Identifica√ß√£o</div>
            </div>
            <div class="wizard-step" data-step="2">
              <div class="wizard-step-circle">2</div>
              <div class="wizard-step-label">C√¥modos</div>
            </div>
            <div class="wizard-step" data-step="3">
              <div class="wizard-step-circle">3</div>
              <div class="wizard-step-label">Revis√£o</div>
            </div>
            <div class="wizard-step" data-step="4">
              <div class="wizard-step-circle">4</div>
              <div class="wizard-step-label">Laudo</div>
            </div>
          </div>
        </nav>

        <!-- Main Content -->
        <main class="container container-sm">

          <!-- Step 1: Identifica√ß√£o do Im√≥vel -->
          <section id="step1" class="step-content">
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Identifica√ß√£o do Im√≥vel</h2>
              </div>
              <div class="card-body">
                <form id="propertyForm">

                  <div class="form-group">
                    <label class="form-label required">Tipo de Vistoria</label>
                    <select class="form-select" id="inspectionType" required>
                      <option value="">Selecione...</option>
                      <option value="entrada">Vistoria de Entrada</option>
                      <option value="saida">Vistoria de Sa√≠da</option>
                    </select>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label required">C√≥digo do Im√≥vel</label>
                      <input type="text" class="form-input" id="propertyCode" placeholder="Ex: IMO-2024-001" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label required">Tipo de Im√≥vel</label>
                      <select class="form-select" id="propertyType" required>
                        <option value="">Selecione...</option>
                        <option value="apartamento">Apartamento</option>
                        <option value="casa">Casa</option>
                        <option value="sobrado">Sobrado</option>
                        <option value="kitnet">Kitnet</option>
                        <option value="comercial">Comercial</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label required">CEP</label>
                    <input type="text" class="form-input" id="zipCode" placeholder="00000-000" required>
                  </div>

                  <div class="form-group">
                    <label class="form-label required">Endere√ßo (Rua/Avenida)</label>
                    <input type="text" class="form-input" id="address" placeholder="Ex: Rua das Flores" required>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label required">N√∫mero</label>
                      <input type="text" class="form-input" id="addressNumber" placeholder="Ex: 123" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Complemento</label>
                      <input type="text" class="form-input" id="addressComplement" placeholder="Ex: Apto 45, Bloco B">
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label required">Bairro</label>
                      <input type="text" class="form-input" id="neighborhood" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label required">Cidade</label>
                      <input type="text" class="form-input" id="city" required>
                    </div>
                  </div>

                  <!-- Save Draft Button -->
                  <div
                    style="margin: 1.5rem 0; padding: 1rem; background: var(--primary-50); border-radius: var(--radius-md); border-left: 4px solid var(--primary-600);">
                    <div style="display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
                      <div>
                        <strong style="color: var(--primary-700);">üíæ Salvar Progresso</strong>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--gray-600);">
                          Salve seus dados a qualquer momento para n√£o perder o progresso
                        </p>
                      </div>
                      <button type="button" class="btn btn-primary" id="saveDraftBtn" style="white-space: nowrap;">
                        üíæ Salvar Agora
                      </button>
                    </div>
                  </div>

                  <h3 class="mt-xl mb-md">Composi√ß√£o do Im√≥vel</h3>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">Quartos</label>
                      <input type="number" class="form-input" id="bedrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Su√≠tes</label>
                      <input type="number" class="form-input" id="suites" min="0" value="0">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Salas</label>
                      <input type="number" class="form-input" id="livingRooms" min="0" value="0">
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">Banheiros</label>
                      <input type="number" class="form-input" id="bathrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Lavabos</label>
                      <input type="number" class="form-input" id="toilets" min="0" value="0">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Cozinhas</label>
                      <input type="number" class="form-input" id="kitchens" min="0" value="1">
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">Varandas</label>
                      <input type="number" class="form-input" id="balconies" min="0" value="0">
                    </div>
                    <div class="form-group">
                      <label class="form-label">Vagas de Garagem</label>
                      <input type="number" class="form-input" id="parkingSpaces" min="0" value="0">
                    </div>
                    <div class="form-group">
                      <label class="form-label">√Årea Total (m¬≤)</label>
                      <input type="number" class="form-input" id="totalArea" min="0" step="0.01">
                    </div>
                  </div>

                  <h3 class="mt-xl mb-md">Caracter√≠sticas Especiais</h3>

                  <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                      <input type="checkbox" id="hasPool">
                      <span>üèä Piscina</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                      <input type="checkbox" id="hasJacuzzi">
                      <span>üõÅ Hidromassagem</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                      <input type="checkbox" id="hasSauna">
                      <span>üßñ Sauna</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                      <input type="checkbox" id="hasGarden">
                      <span>üå≥ Jardim</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                      <input type="checkbox" id="hasBackyard">
                      <span>üè° Quintal</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                      <input type="checkbox" id="hasBarbecue">
                      <span>üçñ Churrasqueira/√Årea Gourmet</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label class="form-label">Observa√ß√µes Gerais</label>
                    <textarea class="form-textarea" id="generalNotes"
                      placeholder="Informa√ß√µes adicionais sobre o im√≥vel..."></textarea>
                  </div>

                </form>
              </div>
              <div class="card-footer">
                <button class="btn btn-primary btn-lg" id="nextToRoomsBtn">
                  Pr√≥ximo: C√¥modos ‚Üí
                </button>
              </div>
            </div>
          </section>

          <!-- Step 2: C√¥modos -->
          <section id="step2" class="step-content hidden">
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">C√¥modos do Im√≥vel</h2>
                <button class="btn btn-primary" id="addRoomBtn">
                  ‚ûï Adicionar C√¥modo
                </button>
              </div>
              <div class="card-body">
                <div id="roomsList" class="room-list">
                  <!-- Rooms will be added dynamically -->
                </div>
                <div id="emptyRoomsMessage" class="text-center" style="padding: 3rem; color: var(--gray-500);">
                  <p style="font-size: 1.125rem; margin-bottom: 1rem;">üìã Nenhum c√¥modo adicionado ainda</p>
                  <p>Clique em "Adicionar C√¥modo" para come√ßar a documentar</p>
                </div>
              </div>
              <div class="card-footer">
                <button class="btn btn-secondary" id="backToPropertyBtn">
                  ‚Üê Voltar
                </button>
                <button class="btn btn-primary btn-lg" id="nextToReviewBtn">
                  Pr√≥ximo: Revis√£o ‚Üí
                </button>
              </div>
            </div>
          </section>

          <!-- Step 3: Revis√£o -->
          <section id="step3" class="step-content hidden">
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Revis√£o da Vistoria</h2>
              </div>
              <div class="card-body">
                <div id="reviewContent">
                  <!-- Review content will be generated dynamically -->
                </div>
              </div>
              <div class="card-footer">
                <button class="btn btn-secondary" id="backToRoomsBtn">
                  ‚Üê Voltar
                </button>
                <button class="btn btn-success btn-lg" id="generateReportBtn">
                  ‚úì Gerar Laudo
                </button>
              </div>
            </div>
          </section>

          <!-- Step 4: Laudo Gerado -->
          <section id="step4" class="step-content hidden">
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Laudo de Vistoria</h2>
              </div>
              <div class="card-body">
                <div id="reportPreview">
                  <!-- Report preview will be shown here -->
                </div>
              </div>
              <div class="card-footer">
                <button class="btn btn-secondary" id="backToReviewBtn">
                  ‚Üê Voltar
                </button>
                <button class="btn btn-success btn-lg" id="downloadPdfBtn">
                  üì• Download PDF
                </button>
                <button class="btn btn-primary" id="newInspectionBtn">
                  üÜï Nova Vistoria
                </button>
              </div>
            </div>
          </section>

        </main>

        <!-- Modal: Add/Edit Room -->
        <div id="roomModal" class="modal-overlay hidden">
          <div class="modal">
            <div class="modal-header">
              <h3 class="modal-title" id="roomModalTitle">Adicionar C√¥modo</h3>
              <button class="modal-close" id="closeRoomModal">&times;</button>
            </div>
            <div class="modal-body">
              <form id="roomForm">

                <div class="form-group">
                  <label class="form-label required">Tipo de C√¥modo</label>
                  <select class="form-select" id="roomType" required>
                    <option value="">Selecione...</option>
                    <option value="quarto">üõèÔ∏è Quarto</option>
                    <option value="suite">üõèÔ∏è Su√≠te</option>
                    <option value="sala">üõãÔ∏è Sala</option>
                    <option value="cozinha">üç≥ Cozinha</option>
                    <option value="banheiro">üöø Banheiro</option>
                    <option value="lavabo">üöΩ Lavabo</option>
                    <option value="varanda">üåÖ Varanda</option>
                    <option value="garagem">üöó Garagem</option>
                    <option value="area-servico">üß∫ √Årea de Servi√ßo</option>
                    <option value="escritorio">üíº Escrit√≥rio</option>
                    <option value="despensa">üì¶ Despensa</option>
                    <option value="outro">üìç Outro</option>
                  </select>
                </div>

                <div class="form-group">
                  <label class="form-label">Nome/Identifica√ß√£o</label>
                  <input type="text" class="form-input" id="roomName" placeholder="Ex: Quarto 1, Sala de Estar">
                  <div class="form-hint">Opcional - para diferenciar c√¥modos do mesmo tipo</div>
                </div>

                <div class="form-group">
                  <label class="form-label required">Estado de Conserva√ß√£o</label>
                  <select class="form-select" id="roomCondition" required>
                    <option value="">Selecione...</option>
                    <option value="excelente">‚≠ê Excelente</option>
                    <option value="bom">‚úÖ Bom</option>
                    <option value="regular">‚ö†Ô∏è Regular</option>
                    <option value="ruim">‚ùå Ruim</option>
                    <option value="pessimo">üö´ P√©ssimo</option>
                  </select>
                </div>

                <div class="form-group">
                  <label class="form-label">Descri√ß√£o Detalhada</label>
                  <textarea class="form-textarea" id="roomDescription"
                    placeholder="Descreva o estado do c√¥modo, itens presentes, problemas encontrados..."></textarea>
                </div>

                <div class="form-group">
                  <label class="form-label">Fotos</label>
                  <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                    <button type="button" class="btn btn-outline" id="takePictureBtn">
                      üì∑ Tirar Foto
                    </button>
                    <button type="button" class="btn btn-outline" id="uploadPictureBtn">
                      üìÅ Upload Foto
                    </button>
                  </div>
                  <input type="file" id="photoUpload" accept="image/*" multiple style="display: none;">
                  <div id="roomPhotos" class="photo-gallery">
                    <!-- Photos will be added here -->
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">√Åudio</label>
                  <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                    <button type="button" class="btn btn-outline" id="recordAudioBtn">
                      üé§ Gravar √Åudio
                    </button>
                    <button type="button" class="btn btn-outline" id="uploadAudioBtn">
                      üìÅ Upload √Åudio
                    </button>
                  </div>
                  <input type="file" id="audioUpload" accept="audio/*" style="display: none;">
                  <div id="roomAudios">
                    <!-- Audio transcriptions will be added here -->
                  </div>
                </div>

              </form>
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" id="cancelRoomBtn">Cancelar</button>
              <button class="btn btn-primary" id="saveRoomBtn">Salvar C√¥modo</button>
            </div>
          </div>
        </div>

        <!-- Modal: Camera -->
        <div id="cameraModal" class="modal-overlay hidden">
          <div class="modal">
            <div class="modal-header">
              <h3 class="modal-title">Capturar Foto</h3>
              <button class="modal-close" id="closeCameraModal">&times;</button>
            </div>
            <div class="modal-body">
              <div class="camera-preview">
                <video id="cameraVideo" autoplay playsinline></video>
                <canvas id="cameraCanvas" style="display: none;"></canvas>
              </div>
              <div class="camera-controls">
                <button class="btn btn-secondary" id="cancelCameraBtn">Cancelar</button>
                <button class="btn btn-primary btn-lg" id="capturePhotoBtn">üì∏ Capturar</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal: Audio Recorder -->
        <div id="audioModal" class="modal-overlay hidden">
          <div class="modal">
            <div class="modal-header">
              <h3 class="modal-title">Gravar √Åudio</h3>
              <button class="modal-close" id="closeAudioModal">&times;</button>
            </div>
            <div class="modal-body">
              <div class="audio-recorder">
                <div id="recordingStatus" class="hidden">
                  <div class="recording-indicator">
                    <div class="recording-dot"></div>
                    <span>Gravando... <span id="recordingTime">00:00</span></span>
                  </div>
                </div>
                <div class="audio-visualizer" id="audioVisualizer">
                  üé§ Pronto para gravar
                </div>
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem;">
                  <button class="btn btn-secondary" id="cancelAudioBtn">Cancelar</button>
                  <button class="btn btn-error" id="startRecordingBtn">‚è∫Ô∏è Iniciar Grava√ß√£o</button>
                  <button class="btn btn-primary hidden" id="stopRecordingBtn">‚èπÔ∏è Parar</button>
                </div>
                <div id="transcriptionArea" class="hidden" style="margin-top: 1.5rem;">
                  <!-- Stage 1: Raw Transcription -->
                  <div id="rawTranscriptionSection">
                    <label class="form-label">üìù Transcri√ß√£o Bruta</label>
                    <div
                      style="background: var(--gray-50); padding: 0.75rem; border-radius: var(--radius-sm); margin-bottom: 0.5rem; font-size: 0.875rem; color: var(--gray-700);">
                      ‚ÑπÔ∏è Revise a transcri√ß√£o e corrija se necess√°rio antes de formatar
                    </div>
                    <textarea class="form-textarea" id="transcriptionText" placeholder="A transcri√ß√£o aparecer√° aqui..."
                      style="min-height: 150px;"></textarea>
                    <button class="btn btn-primary" id="formatTranscriptionBtn" style="margin-top: 1rem; width: 100%;">
                      ‚ú® Formatar para Laudo Profissional
                    </button>
                  </div>

                  <!-- Stage 2: Formatted Text (hidden initially) -->
                  <div id="formattedTranscriptionSection" class="hidden" style="margin-top: 1.5rem;">
                    <label class="form-label">üìã Texto Formatado para Laudo</label>
                    <div
                      style="background: var(--success-50); padding: 0.75rem; border-radius: var(--radius-sm); margin-bottom: 0.5rem; font-size: 0.875rem; color: var(--success-700);">
                      ‚úÖ Texto formatado com pontua√ß√£o, gram√°tica e linguagem t√©cnica adequadas
                    </div>
                    <textarea class="form-textarea" id="formattedText" placeholder="O texto formatado aparecer√° aqui..."
                      style="min-height: 150px;"></textarea>

                    <!-- Choice Buttons -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                      <button class="btn btn-outline" id="useRawTextBtn">
                        üìù Usar Texto Bruto
                      </button>
                      <button class="btn btn-success" id="useFormattedTextBtn">
                        ‚úÖ Usar Texto Formatado
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal: Inspection History -->
        <div id="historyModal" class="modal-overlay hidden">
          <div class="modal modal-lg">
            <div class="modal-header">
              <h3 class="modal-title">üìã Hist√≥rico de Vistorias</h3>
              <button class="modal-close" id="closeHistoryModal">&times;</button>
            </div>
            <div class="modal-body">
              <div class="history-tabs">
                <button class="history-tab active" data-tab="in-progress">
                  Em Andamento (<span id="inProgressCount">0</span>)
                </button>
                <button class="history-tab" data-tab="completed">
                  Finalizadas (<span id="completedCount">0</span>)
                </button>
              </div>
              <div id="historyContent" class="history-content">
                <!-- Inspection cards will be rendered here -->
              </div>
            </div>
          </div>
        </div>

        <!-- External Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

        </main> <!-- End Main Content -->
      </div> <!-- End App Layout -->
    </div> <!-- End App Container -->



    <!-- Application Scripts -->
    <script src="utils.js"></script>
    <script src="cep-autofill.js"></script>
    <script src="storage-api.js"></script>
    <script src="migration-helper.js"></script>
    <script src="storage.js"></script>
    <script src="history.js"></script>
    <script src="ai-formatter.js"></script>
    <script src="camera.js"></script>
    <script src="audio.js"></script>
    <script src="rooms.js"></script>
    <script src="report.js"></script>
    <script src="pdf-generator.js"></script>
    <script src="auth.js"></script>
    <script src="app.js"></script>

</body>

</html>